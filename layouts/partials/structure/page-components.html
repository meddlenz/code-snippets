{{ $components := .Params.components }}
{{ if isset .Params "page_sections" }}
    {{ range $section_count, $section := .Params.page_sections }}
        <div class="page-section">
            {{ if $section.section_heading }}
                <h1 class="section-heading
                           cms-editor-link" 
                    data-cms-editor-link-style="modal" 
                    data-cms-editor-link="cloudcannon:#page_sections[{{ $section_count }}]">{{ $section.section_heading }}</h1>
            {{ end }}
            <div class="components">
                {{ range $component_count, $component := $section.components }}

                    {{ if eq "content-block" $component._component_type }}
                        {{ partial "components/content-block.html" (dict "Component" . 
                                                                         "section_count" $section_count 
                                                                         "component_count" $component_count) }}
                    {{ else if eq "image-gallery" $component._component_type}}
                        {{ partial "components/image-gallery.html" (dict "Component" . 
                                                                         "section_count" $section_count 
                                                                         "component_count" $component_count) }}
                    {{ else if eq "all-posts" $component._component_type}}
                        {{ partial "components/cards.html" (dict "Component" . 
                                                                 "section_count" $section_count 
                                                                 "component_count" $component_count
                                                                 "CollectionName" "posts") }}
                    {{ else if eq "featured-posts" $component._component_type}}
                        {{ partial "components/cards.html" (dict "Component" . 
                                                                 "section_count" $section_count 
                                                                 "component_count" $component_count
                                                                 "CollectionName" "posts"
                                                                 "Featured" true) }}
                    {{ else if eq "recent-posts" $component._component_type}}
                        {{ partial "components/cards.html" (dict "Component" . 
                                                                 "section_count" $section_count 
                                                                 "component_count" $component_count
                                                                 "CollectionName" "posts"
                                                                 "Recent" true) }}
                    {{ else }}
                        <h3 style="text-align: center;color: red;">Component Error: Unset</h3>
                    {{ end }}

                {{ end }}
            </div>
        </div>
    {{ end }}
{{ end }}
